// Generated by CoffeeScript 1.6.3
(function() {
  var Notification, interceptor, todoServices;

  Notification = require('../utils/notification');

  interceptor = {
    response: function(response) {
      var notification;
      if (response.resource instanceof Array) {
        response.resource.forEach(function(todo) {
          var notification;
          notification = new Notification();
          return todo.notifier = function() {
            return notification;
          };
        });
      } else {
        notification = new Notification();
        response.resource.notifier = function() {
          return notification;
        };
      }
      return response.resource;
    }
  };

  todoServices = angular.module('todoServices', ['ngResource']).factory('Todo', function($resource) {
    return $resource("/todos/:todoId", {}, {
      query: {
        method: 'GET',
        params: {
          todoId: ''
        },
        isArray: true,
        interceptor: interceptor
      },
      listOfRemoved: {
        method: 'GET',
        params: {
          todoId: 'removed'
        },
        isArray: true,
        interceptor: interceptor
      },
      create: {
        method: 'PUT',
        params: {
          todoId: ''
        }
      },
      update: {
        method: 'POST',
        params: {
          todoId: '@_id'
        },
        interceptor: interceptor
      },
      remove: {
        method: 'DELETE',
        params: {
          todoId: '@_id'
        }
      }
    });
  });

  module.exports = todoServices;

}).call(this);
