// Generated by CoffeeScript 1.6.3
(function() {
  var widthConfigurableDirective;

  widthConfigurableDirective = angular.module('widthConfigurableDirective', []);

  widthConfigurableDirective.directive('widthConfigurable', [
    '$document', 'app', function($document, app) {
      return {
        restrict: 'A',
        link: function(scope, element, attrs) {
          var initialMouseX, mousemove, mouseup, regulator, startWidth, todoElement;
          todoElement = element;
          regulator = angular.element('<div class="width-regulator"/>');
          todoElement.append(regulator);
          startWidth = scope.todo.width;
          initialMouseX = 0;
          todoElement.css('width', startWidth);
          mousemove = function($event) {
            var dx;
            dx = $event.clientX - initialMouseX;
            todoElement.css({
              width: startWidth + dx + 'px'
            });
            return false;
          };
          mouseup = function() {
            scope.todo.width = parseInt(todoElement.width());
            scope.updateTodo(scope.todo, angular.noop, false);
            $document.unbind('mousemove', mousemove);
            $document.unbind('mouseup', mouseup);
            return app.tracker.sendEvent('Todos', 'Configure todo width', "to value:" + scope.todo.width);
          };
          return regulator.bind('mousedown', function($event) {
            startWidth = todoElement.width();
            initialMouseX = $event.clientX;
            $document.bind('mousemove', mousemove);
            $document.bind('mouseup', mouseup);
            return false;
          });
        }
      };
    }
  ]);

  module.exports = widthConfigurableDirective;

}).call(this);
